# 🔐 OPC UA 安全配置

[English](./README_EN.md) | 简体中文

## 📑 目录
- [概述](#概述)
- [安全模式配置](#安全模式配置)
- [证书管理](#证书管理)
- [用户认证](#用户认证)
- [加密选项](#加密选项)
- [最佳实践](#最佳实践)

## 概述

本文档详细介绍了 OPC UA 协议的安全配置选项和最佳实践。OPC UA 提供了多层安全机制,包括:

- 应用程序身份认证
- 用户访问控制
- 消息加密和完整性保护
- 审计日志记录

## 🔒 安全模式配置

### 可用的安全模式

| 模式 | 说明 | 适用场景 |
|------|------|----------|
| None | 无安全保护 | 仅用于开发测试 |
| Sign | 仅签名 | 需要消息完整性保护 |
| SignAndEncrypt | 签名和加密 | 推荐用于生产环境 |

### 配置示例

```json
{
  "SecurityMode": "SignAndEncrypt",
  "SecurityPolicy": "Basic256Sha256",
  "CertificateFile": "server_cert.der",
  "PrivateKeyFile": "server_key.pem"
}
```

## 🛡️ 证书管理

### 证书类型
- 应用程序实例证书
- 软件证书
- 用户证书

### 证书操作
1. 证书生成
   - 使用 OpenSSL 工具生成
   - 使用 OPC UA 工具套件生成
   
2. 证书存储
   - 证书存储路径配置
   - 私钥保护措施
   - 证书格式要求

3. 信任列表管理
   - 受信任证书添加/删除
   - 证书验证规则
   - 吊销证书处理

## 👤 用户认证

### 认证方式

| 方式 | 安全级别 | 适用场景 |
|------|---------|----------|
| 匿名 | 低 | 仅用于开发测试 |
| 用户名密码 | 中 | 一般应用场景 |
| X509证书 | 高 | 高安全要求场景 |

### 配置示例

```json
{
  "UserAuthMode": "Username",
  "Users": [
    {
      "Username": "admin",
      "Password": "****",
      "Role": "Administrator"
    }
  ]
}
```

## 🔐 加密选项

### 支持的加密算法

| 算法 | 安全强度 | 性能影响 |
|------|---------|----------|
| Basic128Rsa15 | 中 | 低 |
| Basic256 | 高 | 中 |
| Basic256Sha256 | 最高 | 较高 |

### 性能优化建议

1. 根据实际安全需求选择合适的加密算法
2. 考虑硬件性能和网络带宽限制
3. 在安全性和性能间找到平衡点

## ⭐ 最佳实践

1. 安全配置建议
   - 始终启用加密和签名
   - 使用强密码策略
   - 定期更新证书
   - 实施最小权限原则

2. 运维建议
   - 定期安全审计
   - 证书到期提醒
   - 安全事件监控
   - 应急响应预案

## 📚 相关文档

- [OPC UA 节点配置](../nodes/README_CN.md)
- [系统安全策略](../../../security/README_CN.md)
- [用户管理指南](../../../security/access/users/README_CN.md)
