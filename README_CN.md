# 基于ST语言的PLC项目模板

[English](./README_EN.md) | [中文](./README_CN.md)

### 项目简介
这是一个基于结构化文本(ST)编程语言的通用PLC(可编程逻辑控制器)项目模板，遵循IEC 61131-3标准。项目针对Codesys平台优化，为工业自动化应用提供了全面的框架。

### 开发环境要求
- Codesys V3.5 SP17或更高版本
- 支持的目标系统：
  - Codesys Control Win V3
  - Codesys Control RTE
  - 所有支持Codesys Runtime的硬件PLC

### 主要特点
- 完全符合IEC 61131-3标准
- 模块化程序结构
- 完善的代码文档
- 可复用的功能块
- 标准库支持
- 跨平台兼容性

### 项目结构
```
📁 项目根目录/
├── 📁 src/        # 源代码目录
│   ├── 📁 POUs/   # 程序组织单元
│   ├── 📁 DUTs/   # 数据单元类型
│   └── 📁 GVLs/   # 全局变量列表
│
├── 📁 doc/        # 文档目录
│   ├── 📁 configuration/  # 配置文档
│   ├── 📁 function_blocks/ # 功能块文档
│   └── 📁 overview/      # 项目概述
│
└── 📁 test/       # 测试目录
    ├── 📁 unit/   # 单元测试
    └── 📁 integration/ # 集成测试
```

### 快速开始
1. 克隆本仓库
2. 使用Codesys V3.5打开项目文件(.project)
3. 配置目标设备：
   - 选择合适的设备描述文件
   - 配置通信参数(如以太网IP)
   - 设置PLC启动行为
4. 库管理：
   - 确认所需库已包含
   - 根据需要添加额外的Codesys标准库
5. 程序开发：
   - 使用提供的模板创建新的POUs
   - 遵循项目结构指南
6. 编译与下载：
   - 构建整个项目
   - 检查程序一致性
   - 下载到目标设备
7. 在线调试：
   - 使用Codesys在线监控功能
   - 使用断点和单步执行调试
   - 使用跟踪和监视列表分析变量

### 编码规范
主要规范概要：

1. 变量命名规范：
   - 全局变量：`G_` 前缀
   - 输入变量：`i_` 前缀
   - 输出变量：`o_` 前缀
   - 局部变量：`l_` 前缀
   - 静态变量：`s_` 前缀
   - 临时变量：`temp_` 前缀
   - 常量：`C_` 前缀

2. POU命名规范：
   - 功能块：`FB_` 前缀（如：FB_MotorControl）
   - 函数：`F_` 前缀（如：F_Calculate）
   - 程序：`PROG_` 前缀（如：PROG_Main）

3. 数据类型命名规范：
   - 结构体：`ST_` 前缀（如：ST_MotorConfig）
   - 枚举：`E_` 前缀（如：E_OperationMode）

4. 代码格式要求：
   - 统一缩进（4个空格）
   - 合理使用空行分隔代码块
   - 每行代码不超过80字符

5. 注释要求：
   - 文件头部必须包含完整注释
   - 功能块必须包含功能描述
   - 变量声明必须包含单位说明

更多详细规范，包括安全规范、版本控制等，请参考完整的[编程规范文档](./src/STANDARDS_CN.md)。

### 文档说明
- 详细文档可在`doc/`目录中找到
- 每个功能块和程序都有其用途和参数说明
- 变量命名遵循行业标准

### 贡献指南
欢迎贡献！请随时提交pull request。

### 许可证
本项目采用Mozilla公共许可证2.0版(MPL-2.0)。

MPL-2.0许可证主要规则：
1. 商业使用：可用于商业项目
2. 代码分发：可自由分发源代码
3. 修改权利：可修改源代码
4. 专利权利：贡献者授予专利权
5. 有限范围：仅修改的文件需遵循相同许可证

完整许可证文本可在以下位置找到：
- [Mozilla公共许可证2.0](https://www.mozilla.org/en-US/MPL/2.0/)
- [项目许可证文件](./LICENSE)

### 联系方式
如有任何问题或建议，请创建issue。